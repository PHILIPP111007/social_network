<!DOCTYPE html>
{% load static %}

<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{{ first_name }} {{ last_name }}</title>
	<link rel="stylesheet" href='{% static "css/friends.css" %}'>
</head>
<body>
	<div id="upper-div"></div>

	<div class="upper-line">
		<h5>{{ first_name }} {{ last_name }}</h5>
		<nav id="navigation">
			<button aria-expanded="false">Настройки</button>
			<div class="settings-bar" hidden>
	   		 	<button id="backgroundColorChangeButton" onclick="backgroundColorChange()">Изменить тему</button>
	   		 	<form id="quitButton" method="GET" action="quit/">
					<input type="submit" value="Выйти">
				</form>
			</div>
		</nav>
	</div>

	
	
	<aside class="left-list">
		<!-- Боковая панель (сайдбар) -->
		<nav>
			<!-- Дополнительное меню страницы -->
			<p class="menu-link"><a href="/social_network/user/{{ username }}">Моя страница</a></p>
			<p class="menu-link"><a href="">Мессенджер</a></p>
			<p class="menu-link"><a href="/social_network/friends/{{ username }}" style="background-color: rgb(205,205,205);">Друзья</a></p>
			<p class="menu-link"><a href="/social_network/news/{{ username }}">Новости</a></p>
		</nav>
	</aside>

	<div class="main-content">

		<div class="user">
			<h3>Друзья</h3>
			<p>{{ first_name }} {{ last_name }}</p>
			<p>@{{ username }}</p>
			<p>&#91; друзья: {{ friends.count }} &#93; &#91; подписки: {{ subscriptions.count }} &#93; &#91; подписчики: {{ subscribers.count }} &#93;</p>
		</div>

		<div class="find-form">
			<caption>Найди друзей!</caption>
			<form method="POST" action="">
				{% csrf_token %}
				<table class="form">
					{{ find_user_form }}
				</table>
				<input type="submit" value="Найти">
			</form>
		</div>

		<div class="find-users">
			{% if find_users %}
				{% for user in find_users %}
					<div class="user-card">
						<h4>{{ user.first_name }} {{ user.last_name }}</h4>
						<h4 style="color:gray; font-size: 13px">@{{ user.username }}</h4>

						<a href="/social_network/user/{{ user.username }}"><button>Профиль</button></a>

						<form method="POST" action="add_friend/{{ user.username }}/">
							{% csrf_token %}
							<input class="add_friend" type="submit" value="Добавить в друзья">
						</form>
					</div>
				{% endfor %}
			{% endif %}
		</div>


		<div class="friends-section">

			<div class="my_friends">
				{% if friends %}
					<h3>Друзья</h3>
					<div>
						{% for friend in  friends %}
							<div class="user-card">
								<h4>{{ friend.first_name }} {{ friend.last_name }}</h4>
								<h4 style="color:gray; font-size: 13px">@{{ friend.username }}</h4>
						
								<a href="/social_network/user/{{ friend.username }}"><button>Профиль</button></a>

								<form method="POST" action="delete_friend/{{ friend.username }}/">
									{% csrf_token %}
									<input class="delete_friend" type="submit" value="Удалить из друзей">
								</form>
							</div>
						{% endfor %}
					</div>
				{% else %}
					<h3 style="color:gray;">У вас пока нет друзей</h3>
				{% endif %}
			</div>


			<div class="my_friends">
				{% if subscriptions %}
					<h3>Подписки</h3>
					<div>
						{% for friend in  subscriptions %}
							<div class="user-card">
								<h4>{{ friend.first_name }} {{ friend.last_name }}</h4>
								<h4 style="color:gray; font-size: 13px">@{{ friend.username }}</h4>

								<a href="/social_network/user/{{ friend.username }}"><button>Профиль</button></a>
					
								<form method="POST" action="delete_friend/{{ friend.username }}/">
									{% csrf_token %}
									<input class="remove_subscribe" type="submit" value="Убрать подписку">
								</form>
							</div>
						{% endfor %}
					</div>
				{% else %}
					<h3 style="color:gray;">Вы пока ни на кого не подписаны</h3>
				{% endif %}
			</div>


			<div class="my_friends">
				{% if subscribers %}
					<h3>Подписчики</h3>
					<div>
						{% for friend in  subscribers %}
							<div class="user-card">
								<h4>{{ friend.first_name }} {{ friend.last_name }}</h4>
								<h4 style="color:gray; font-size: 13px">@{{ friend.username }}</h4>

								<a href="/social_network/user/{{ friend.username }}"><button>Профиль</button></a>
								
								<form method="POST" action="add_friend/{{ friend.username }}/">
									{% csrf_token %}
									<input class="add_friend" type="submit" value="Добавить в друзья">
								</form>

								<form method="POST" action="delete_subscriber/{{ friend.username }}/">
									{% csrf_token %}
									<input class="remove_subscribe" type="submit" value="Удалить его подписку">
								</form>
							</div>
						{% endfor %}
					</div>
				{% else %}
					<h3 style="color:gray;">На вас пока никто не подписан</h3>
				{% endif %}
			</div>
		
		</div>

	</div>

	<div id="upper-div"></div>
	
	<script src="{% static 'js/friends.js' %}" type="text/javascript" charset="utf-8" async defer></script>
</body>
</html>