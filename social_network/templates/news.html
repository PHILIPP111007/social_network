<!DOCTYPE html>
{% load static %}

<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>{{ name }} {{ surname }}</title>
	<link rel="stylesheet" href='{% static "css/news.css" %}'>
</head>
<body>

    <div id="upper-div"></div>

	<div class="upper-line">
		<h5>{{ name }} {{ surname }}</h5>
		<nav id="navigation">
			<button id="toggleTextarea" aria-expanded="false">
				<img src="{% static 'images/lines_menu_burger_icon_123889.svg' %}" width="30" height="16" alt="menu bar">
			</button>
			<div class="settings-bar" hidden>
	   		 	<button id="backgroundColorChangeButton" onclick="backgroundColorChange()">Change theme</button>
	   		 	<form id="quitButton" method="GET" action="quit/">
					<input type="submit" value="Quit">
				</form>
			</div>
		</nav>
	</div>


    <aside class="left-list">
		<nav>
			<p class="menu-link"><a href="/social_network/user/{{ nickname }}">My page</a></p>
			<p class="menu-link"><a href="">Messenger</a></p>
			<p class="menu-link"><a href="/social_network/friends/{{ nickname }}">Friends</a></p>
			<p class="menu-link"><a href="/social_network/news/{{ nickname }}" style="background-color: rgb(205,205,205);">News</a></p>
		</nav>
	</aside>


	<div class="main-content">

			<div class="blog">
				{% if friends_records %}
					{% for record in friends_records %}
						<div class="record">
							<a class="profile-link" href="/social_network/user/{{ record.user_id }}">
								<h3>{{ record.user.first_name }} {{ record.user.last_name }}</h3>
								<h6>@{{ record.user_id }}</h6>
								<h6>Record from the {{ record.date_time }} {% if record.is_changed %}&#91;&#10000; Modified&#93;{% endif %}</h6>
							</a>

							{% if record.content|wordcount > 50 %}
								<div class="half-content" id="half-{{record.id}}">
									{{ record.content | linebreaks | urlize | truncatewords:100 }}
									<br/>
									<br/>
									<button data-id="{{record.id}}" href="javascript:void();" class="show-hide-btn">
										read more
									</button>
								</div>
								<div class="full-content" id="full-{{record.id}}" style="display: none;">
									{{ record.content | linebreaks | urlize }}
									<button data-id="{{record.id}}" href="javascript:void();" class="show-hide-btn">
										read less
									</button>
								</div>
								
								<script>
									$(document).ready(function() {
										$(".show-hide-btn").click(function() {
											var id = $(this).data("id");
											$("#half-" + id).toggle();  // hide/show..
											$("#full-" + id).toggle();
										})
									})
								</script>
								<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>

							{% else %}
								<div>{{ record.content | linebreaks | urlize }}</div>
							{% endif %}
						</div>
                	{% endfor %}
				{% else %}
					<h3>When you have friends, you can see their news!</h3>
				{% endif %}
			</div>
    </div>

    <div id="upper-div"></div>

	<script src="{% static 'js/user.js' %}" type="text/javascript" charset="utf-8" async defer></script>

</body>
</html>